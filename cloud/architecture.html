

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Registry API Service Cloud Architecture &mdash; PDS Registry 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> PDS Registry
          

          
            
            <img src="../_static/PDS_Planets.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About PDS Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_startup.html">Cloud Startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/tasks.html">User Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/tasks.html">Admin Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDS Registry</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>The Registry API Service Cloud Architecture</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/pds-data-dictionaries/ldd-template/blob/main/docs/source/cloud/architecture.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-registry-api-service-cloud-architecture">
<h1>The Registry API Service Cloud Architecture<a class="headerlink" href="#the-registry-api-service-cloud-architecture" title="Permalink to this heading">¶</a></h1>
<div class="section" id="on-prem-vs-cloud">
<h2>On-Prem vs. Cloud<a class="headerlink" href="#on-prem-vs-cloud" title="Permalink to this heading">¶</a></h2>
<p>In a typical on-premise deployment, the PDS Registry Application is composed, server-side, of
a ReSTful API Server and an OpenSearch database. The users submit queries to the API which queries OpenSearch for building the responses.</p>
<p>Both components of which are highlighted below:</p>
<img alt="../_images/registry-onprem.png" src="../_images/registry-onprem.png" />
<p>Given the stateless nature of the API service, scaling is a matter of placing
a load balancer in front of a number of dedicated hosts which run copies of
the service. While relatively minor in complexity, this strategy nonetheless
constitutes a significant administrative overhead and potentially wastes
resources that must be running in anticipation of peak loads that run largely
idle for the remaining time. These issues are addressed by two of the key
advantages of cloud deployments.</p>
<p>The API service’s cloud architecture is given in the diagram below. While
seemingly more complex than an on-prem deployment, the utilization of
AWS services simplifies administration, streamlines scaling with little
idle resources and better secures management of sensitive data such
as Elasticsearch credentials.</p>
<img alt="../_images/registry_cloud.png" src="../_images/registry_cloud.png" />
<p>The centerpiece of the cloud architecture is the use of AWS Fargate, a
flavor of the Elastic Container Service (ECS) which supports the execution
of containerized applications (tasks) without requiring explicit
provisioning of compute resources. The images for these application
containers are placed in and pulled from the Elastic Container Registry
(ECR). Each service instance connects to Elasticsearch, with the
necessary credentials injected into each container by the Secrets
Manager. Other non-sensitive run-time configuration is provided by the
Systems Manager Parameter Store.</p>
<p>Amazon’s content delivery network, Cloudfront, is placed in front of
the Elastic Load Balancer (ELB). Cloudfront provides high-speed, low-latency
access while also preventing from unintentional or malicious bulk download
of data.</p>
<p>The processing of data by Harvest and push to Elasticsearch by the
Registry-manager are still performed on-premise, the latter connecting
directly to Elasticsearch, access to which is controlled by authentication
and IP whitelisting.</p>
</div>
<div class="section" id="en-s-centralized-registry-api-service">
<h2>EN’s Centralized Registry API Service<a class="headerlink" href="#en-s-centralized-registry-api-service" title="Permalink to this heading">¶</a></h2>
<p>The Engineering Node’s Registry API Service is the central point from
which received search requests are disseminated to all discipline nodes
(DNs) to provide aggregated, global results. This strategy leverages
Elasticsearch’s cross-cluster search (CCS) capability in which the
central instance (i.e. EN’s) forwards queries to all instances which have
been designated as remotes. See figure below.</p>
<img alt="../_images/registry_cloud_ccs.png" src="../_images/registry_cloud_ccs.png" />
<p>Requests can be directed to a particular DN’s Registry API Service by
specifying the DN’s abbreviated name (e.g. ‘GEO’) as the value of the
HTTP header ‘x-request-node’ along with the request. If this header is
not specified, the request is routed to the EN registry.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2022 California Institute of Technology

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>